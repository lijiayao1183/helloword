webpackJsonp([4],{1007:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t(9),i=t.n(n),l=t(15),s=t(893),r=t(995);t(25),t(24);a.default={$validates:!0,data:function(){return{channelTypeOptions:r.a,channelId:parseInt(this.$route.params.id),catalogId:parseInt(this.$route.params.catalogId),initName:"",data:_.cloneDeep(r.b),isEdit:!1,nameExpression:{rules:{required:!0,nameExist:null}},puserNameError:!1,ppasswordError:!1,puserName:"",ppassword:"",portExpression:{rules:{required:!0,lessThanNumberEquals:1,moreThanNumberEquals:65535,isInteger:!0}}}},components:{},created:function(){this.init()},watch:{},computed:i()({},t.i(l.a)({loading:"loading",saving:"saving"}),{isDisabledEditBtn:function(){return!1},title:function(){return-1===this.channelId?"新建通道":this.isEdit?"编辑通道":"通道详情"}}),methods:{validatePuserNameError:function(){this.puserNameError=!this.puserName||0==_.trim(this.puserName).length},validatePpasswordError:function(){this.ppasswordError=!this.ppassword||0==_.trim(this.ppassword).length},init:function(){var e=this;this.nameExpression.rules.nameExist=this.validateChannelName,-1===this.channelId?(this.isEdit=!0,this.data=_.cloneDeep(r.c)):s.a.channel.detail(this.channelId).then(function(a){e.data=a.data,e.initName=a.data.channelName,e.puserName=a.data.userName,e.ppassword=a.data.passWord})},back:function(){this.$router.push({path:"/channel-manage/list-info/"+this.catalogId})},edit:function(){this.isEdit=!0},save:function(){var e=this;this.validatePpasswordError(),this.validatePuserNameError(),this.$validator.validateAll().then(function(a){a&&e.commit()})},commit:function(){var e=this;this.data.catalogId=this.catalogId,this.data.passWord=this.ppassword,this.data.userName=this.puserName,-1===this.channelId?s.a.channel.save(this.data).then(function(a){"0000"==a.code?(e.$message.success("创建成功"),e.$router.back(-1)):a.msg&&e.$message({message:a.msg,type:"error"})}).catch(function(a){e.$message({message:"创建异常",type:"error"})}):s.a.channel.update(this.data).then(function(a){"0000"==a.code?(e.$message.success("更新成功"),e.$router.back(-1)):a.msg&&e.$message({message:a.msg,type:"error"})}).catch(function(a){e.$message({message:"更新异常",type:"error"})})},validateChannelName:function(e){return-1!=this.channelId&&e==this.initName||s.a.ifChannelNameExist(encodeURIComponent(e)).then(function(e){return e.data},function(){return!1})}}}},1069:function(e,a){},1163:function(e,a){e.exports={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"container"},[t("div",{staticClass:"edit-top"},[t("div",{staticStyle:{"margin-left":"20px",width:"50px",float:"left"}},[t("span",{staticStyle:{color:"#20a0ff",cursor:"pointer"},on:{click:e.back}},[e._v("<")]),e._v(" "),t("el-button",{attrs:{type:"text"},on:{click:e.back}},[e._v("返回")])],1),e._v(" "),t("span",{staticClass:"edit-title"},[e._v(e._s(e.title))]),e._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isEdit,expression:"!isEdit"}],attrs:{disabled:e.isDisabledEditBtn,type:"text"},on:{click:e.edit}},[e._v("编辑通道\n      ")])],1),e._v(" "),t("div",{staticClass:"edit-container"},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"ruleForm",attrs:{model:e.data,"element-loading-text":"拼命加载中","label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"通道名称："}},[e.isEdit?[t("el-input",{directives:[{name:"validate",rawName:"v-validate",value:e.nameExpression,expression:"nameExpression"}],class:{input:!0,"is-danger":e.errors.has("channelName")},attrs:{name:"channelName","data-vv-as":"通道名称"},model:{value:e.data.channelName,callback:function(a){e.$set(e.data,"channelName",a)},expression:"data.channelName"}}),e._v(" "),e.errors.has("channelName")?t("span",{staticClass:"help is-danger"},[e._v(e._s(e.errors.first("channelName")))]):e._e()]:t("span",[e._v(e._s(e.data.channelName))])],2)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"通道描述："}},[e.isEdit?t("el-input",{attrs:{type:"textarea",placeholder:"非必填",name:"channelDesc"},model:{value:e.data.channelDesc,callback:function(a){e.$set(e.data,"channelDesc",a)},expression:"data.channelDesc"}}):t("span",[e._v(e._s(e.data.channelDesc))])],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"设备IP："}},[e.isEdit?[t("el-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{input:!0,"is-danger":e.errors.has("ip")},attrs:{name:"ip","data-vv-as":"设备IP"},model:{value:e.data.ip,callback:function(a){e.$set(e.data,"ip",a)},expression:"data.ip"}}),e._v(" "),e.errors.has("ip")?t("span",{staticClass:"help is-danger"},[e._v(e._s(e.errors.first("ip")))]):e._e()]:t("span",[e._v(e._s(e.data.ip))])],2)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"设备端口："}},[e.isEdit?[t("el-input",{directives:[{name:"validate",rawName:"v-validate",value:e.portExpression,expression:"portExpression"}],class:{input:!0,"is-danger":e.errors.has("port")},attrs:{name:"port","data-vv-as":"设备端口"},model:{value:e.data.port,callback:function(a){e.$set(e.data,"port",a)},expression:"data.port"}}),e._v(" "),e.errors.has("port")?t("span",{staticClass:"help is-danger"},[e._v(e._s(e.errors.first("port")))]):e._e()]:t("span",[e._v(e._s(e.data.port))])],2)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"设备用户名："}},[e.isEdit?[t("el-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{input:!0,"is-danger":e.puserNameError},attrs:{"data-vv-as":"设备用户名"},on:{change:e.validatePuserNameError,blur:e.validatePuserNameError},model:{value:e.puserName,callback:function(a){e.puserName=a},expression:"puserName"}}),e._v(" "),e.puserNameError?t("div",{staticClass:"el-form-item__error"},[e._v("请正确填写设备用户名")]):e._e()]:t("span",[e._v(e._s(e.data.userName))])],2)],1)],1),e._v(" "),e.isEdit?t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"设备密码："}},[t("el-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{input:!0,"is-danger":e.ppasswordError},attrs:{"data-vv-as":"设备密码",type:"password","auto-complete":"new-password"},on:{change:e.validatePpasswordError,blur:e.validatePpasswordError},model:{value:e.ppassword,callback:function(a){e.ppassword=a},expression:"ppassword"}}),e._v(" "),e.ppasswordError?t("div",{staticClass:"el-form-item__error"},[e._v("请正确填写设备密码")]):e._e()],1)],1)],1):e._e(),e._v(" "),t("el-row",[t("el-form-item",{attrs:{label:"传输协议："}},[e.isEdit?[t("el-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{input:!0,"is-danger":e.errors.has("channelType")},attrs:{placeholder:"请选择",name:"channelType","data-vv-as":"传输协议"},model:{value:e.data.channelType,callback:function(a){e.$set(e.data,"channelType",a)},expression:"data.channelType"}},e._l(e.channelTypeOptions,function(e){return t("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1),e._v(" "),e.errors.has("channelType")?t("span",{staticClass:"help is-danger"},[e._v(e._s(e.errors.first("channelType")))]):e._e()]:t("span",[e._v(e._s(e.data.channelType))])],2)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"推流地址："}},[e.isEdit?[t("el-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{input:!0,"is-danger":e.errors.has("channelDest")},attrs:{name:"channelDest","data-vv-as":"推流地址"},model:{value:e.data.channelDest,callback:function(a){e.$set(e.data,"channelDest",a)},expression:"data.channelDest"}}),e._v(" "),e.errors.has("channelDest")?t("span",{staticClass:"help is-danger"},[e._v(e._s(e.errors.first("channelDest")))]):e._e()]:t("span",[e._v(e._s(e.data.channelDest))])],2)],1)],1),e._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],staticClass:"save-btn",attrs:{type:"primary",loading:e.saving},on:{click:e.save}},[e._v(e._s(-1===e.channelId?"提交":"保存"))])],1)],1)])},staticRenderFns:[]}},870:function(e,a,t){function n(e){t(1069)}var i=t(1)(t(1007),t(1163),n,"data-v-9400e35a",null);e.exports=i.exports},893:function(e,a,t){"use strict";var n=t(22);a.a={catalogTree:{getAllTree:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a="/api/catalogTree?parentId="+e+"&status=1";return t.i(n.a)({method:"get",url:a})},get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a="/api/catalogTree?parentId="+e+"&status=1";return t.i(n.a)({method:"get",url:a})},post:function(e){return t.i(n.a)({method:"post",url:"/api/catalogTree",data:e})},put:function(e){return t.i(n.a)({method:"put",url:"/api/catalogTree",data:e})},batchRemoveTree:function(e){var a="/api/catalogTree/batchRemoveTree?ids="+e;return t.i(n.a)({method:"put",url:a})},batchMove:function(e,a){var i="/api/catalogTree/batchMove?ids="+e+"&parentId="+a;return t.i(n.a)({method:"put",url:i})}},channel:{getList:function(e,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s="/api/monitor/channel/list?catalogId="+e+"&keyword="+a+"&pageSize="+i+"&pageNo="+l;return t.i(n.a)({method:"get",url:s})},batchDelete:function(e){var a="/api/monitor/channel/delete/"+e;return t.i(n.a)({method:"delete",url:a})},batchUpdateStatus:function(e,a){var i="/api/monitor/channel/active/"+e+"?status="+a;return 0==a&&(i="/api/monitor/channel/disActive/"+e+"?status="+a),t.i(n.a)({method:"put",url:i})},batchMove:function(e,a){var i="/api/monitor/channel/batchMove?ids="+e+"&catalogId="+a;return t.i(n.a)({method:"put",url:i})},save:function(e){return t.i(n.a)({method:"post",url:"/api/monitor/channel/save",data:e})},update:function(e){return t.i(n.a)({method:"post",url:"/api/monitor/channel/update",data:e})},ifChannelNameExist:function(e){var a="/api/monitor/channel/name?keyword="+e;return t.i(n.a)({method:"get",url:a})},detail:function(e){var a="/api/monitor/channel/detail/"+e;return t.i(n.a)({method:"get",url:a})}}}},995:function(e,a,t){"use strict";t.d(a,"b",function(){return n}),t.d(a,"a",function(){return l}),t.d(a,"c",function(){return i});var n={id:2,channelName:"逾期率预警",channelDesc:"当天逾期率超过20%",channeldest:"1",ruleCodeName:"1",alertCondition:'{"expression":[{"fieldName":"#{sex}","operator":"==","value":"1"},{"rule":"||","fieldName":"#{machine_Phones}","operator":"==","value":"21"},{"rule":"|| (","fieldName":"#{phone_network_time}","operator":">=","value":"6"}],"suffix":{"selectedId":1,"selectedName":")"},"traceData":[{"field":{"id":206622721253376,"fieldEn":"sex","fieldCn":"性别","fieldTypeId":206622316394496,"fieldType":null,"valueType":3,"valueScope":"男:1,女:2","valueFormat":null,"isDerivative":0,"isOutput":0,"isCommon":0,"formula":null,"formulaShow":null,"usedFieldId":null,"origFieldId":null,"author":185,"organId":66,"nickName":null,"created":1520931600000,"updated":1520931600000,"isLatestVersion":null,"engineId":null,"engineName":null,"status":1,"fieldCondList":[],"fieldRelId":null,"sourceFieldModels":null,"fieldTypeModels":null,"outRange":"[{\\"condition\\":4,\\"index\\":2,\\"value\\":\\"1\\"},{\\"condition\\":3,\\"index\\":1,\\"value\\":\\"1\\"}]","valueNull":null,"isDimension":0,"conditionType":null,"isReadonly":0,"parentVersionId":null,"isUpdate":1,"error":null},"fieldId":null,"preFieldEn":"sex","fieldType":3,"operatorId":"==","operatorName":"=","multipleValueIds":[],"dateTimeValue":null,"valueId":"1","enumValue":"男","valueList":[{"id":"1","name":"男"},{"id":"2","name":"女"}],"value":null},{"ruleId":"||","ruleName":"或者","field":{"id":212058866167808,"fieldEn":"machine_Phones","fieldCn":"同设备近1小时申请手机号个数","fieldTypeId":195991621836800,"fieldType":null,"valueType":1,"valueScope":"","valueFormat":null,"isDerivative":0,"isOutput":1,"isCommon":0,"formula":"{}","formulaShow":"","usedFieldId":null,"origFieldId":null,"author":179,"organId":66,"nickName":null,"created":1523585968000,"updated":1523585968000,"isLatestVersion":null,"engineId":null,"engineName":null,"status":1,"fieldCondList":[],"fieldRelId":null,"sourceFieldModels":null,"fieldTypeModels":null,"outRange":"[{\\"index\\":1,\\"condition\\":3,\\"value\\":\\"0\\"},{\\"index\\":2,\\"condition\\":1,\\"value\\":\\"0\\"},{\\"index\\":3,\\"condition\\":2,\\"value\\":\\"0\\"}]","valueNull":null,"isDimension":0,"conditionType":null,"isReadonly":0,"parentVersionId":null,"isUpdate":1,"error":null},"preFieldEn":"machine_Phones","operatorId":"==","operatorName":"=","valueId":"21","multipleValueIds":[],"dateTimeValue":null,"enumValue":"","valueList":[],"fieldType":1,"value":null},{"ruleId":"|| (","ruleName":"或者 (","field":{"id":206622721318912,"fieldEn":"phone_network_time","fieldCn":"手机在网时长","fieldTypeId":206622316394496,"fieldType":null,"valueType":1,"valueScope":"","valueFormat":null,"isDerivative":0,"isOutput":0,"isCommon":0,"formula":null,"formulaShow":null,"usedFieldId":null,"origFieldId":null,"author":185,"organId":66,"nickName":null,"created":1520931600000,"updated":1520931600000,"isLatestVersion":null,"engineId":null,"engineName":null,"status":1,"fieldCondList":[],"fieldRelId":null,"sourceFieldModels":null,"fieldTypeModels":null,"outRange":"[{\\"condition\\":1,\\"index\\":2,\\"value\\":\\"0\\"},{\\"condition\\":2,\\"index\\":3,\\"value\\":\\"0\\"},{\\"condition\\":3,\\"index\\":1,\\"value\\":\\"0\\"}]","valueNull":null,"isDimension":0,"conditionType":null,"isReadonly":0,"parentVersionId":null,"isUpdate":1,"error":null},"preFieldEn":"phone_network_time","operatorId":">=","operatorName":">=","valueId":"6","multipleValueIds":[],"dateTimeValue":null,"enumValue":"","valueList":[],"fieldType":1,"value":null}]}',alertConditionField:null,alertWay:3,alertStatus:2,alertStatusName:"停用",emailTemplate:'{"conditions":[{"input":[{"field_name":"基本额度","field_code":"basic_limit","segments":[],"field_id":206622721380352,"field_scope":"[0,100000000]","field_type":1,"isDimension":0,"fieldSwitch":false,"outRangeValue":""},{"field_name":"近6个月征信查询次数","field_code":"6months_credit_inquiry_time","segments":[],"field_id":206622721331200,"field_scope":"","field_type":1,"isDimension":0,"fieldSwitch":false,"outRangeValue":""}],"output":{"field_name":"","field_code":"","field_type":1,"field_id":""},"formula":"我是个测试的测试邮件\\n    基本额度： #{basic_limit} \\n    近6个月征信查询次数： #{6months_credit_inquiry_time} ","formula_show":"我是个测试的测试邮件\\n    基本额度： @基本额度@ \\n    近6个月征信查询次数： @近6个月征信查询次数@ "}]}',smsTemplate:'{"conditions":[{"input":[{"field_name":"是否申请地本地户籍","field_code":"is_indigen","segments":[],"field_id":206622721312768,"field_scope":"是:1,否:2","field_type":3,"isDimension":0,"fieldSwitch":false,"outRangeValue":""},{"field_name":"性别","field_code":"sex","segments":[],"field_id":206622721253376,"field_scope":"男:1,女:2","field_type":3,"isDimension":0,"fieldSwitch":false,"outRangeValue":""},{"field_name":"婚姻情况","field_code":"marital_status","segments":[],"field_id":206622721265664,"field_scope":"已婚有子女:1,已婚无子女:2,其他:3","field_type":3,"isDimension":0,"fieldSwitch":false,"outRangeValue":""}],"output":{"field_name":"","field_code":"","field_type":1,"field_id":""},"formula":"我是个测试的短信\\n      是否申请本地户籍： #{is_indigen} \\n      性别：#{sex} \\n      婚姻情况：#{marital_status} ","formula_show":"我是个测试的短信\\n      是否申请本地户籍： @是否申请地本地户籍@ \\n      性别：@性别@ \\n      婚姻情况：@婚姻情况@ "}]}',smsId:"duanxinID",maxTimes:30,usedTimes:10,roleId:null,organId:null,createUserId:null,createTime:1522315953e3,isDelete:0,deleteTime:null,receiveUserId:"177,179",receiveUserList:[{userId:177,account:"007",nickName:"xuetong",email:"s@c.c",cellphone:"12345678901",status:1,roleId:null,roleName:null,organId:66,organName:null},{userId:179,account:"nk1",nickName:"诺克",email:"123@qq.com",cellphone:"15091189988",status:1,roleId:null,roleName:null,organId:66,organName:null}],hasAlert:!1,usingFieldId:"206622721253376,212058866167808,206622721318912,206622721380352,206622721331200,206622721312768,206622721265664"},i={channelName:"",channelDesc:"",channelDest:"",alertStatus:1,alertStatusName:"启用"},l=[{name:"rtmp/flv",value:"rtmp/flv"}]}});
//# sourceMappingURL=4.59ce34edb5f5fc78033a.js.map